# 项目建议

#### 数据结构维护：

使用EF Core，通过微软成熟的EF，仅仅只需对实体对象维护，即可进行数据库表结构、字段的跨平台（多数据库）统一管理。

PS:

[java C#数据类型对照](https://www.ibm.com/support/knowledgecenter/SSTVLU_8.6.1/com.ibm.websphere.extremescale.doc/rxsxdfequiv.html): 

- 除String以外，所使用字段如果需要为null仅需在类型后增加?来标注；

- 枚举类型的差异，导致java中只能通过Integer来接收；
- MySql没有对应的bool类型，实际使用int来储存，现有生成框架只能将其生成为Integer，需手动修改为Boolean；
- 实体数据类型的规范，之前开发中，使用String来存储Date类型，此处必须修改为Date；
- 通过接口或者父类可将基础字段统一管理，不在会出现现有项目，如主键、创建时间等字段，在不同表中，字段名及数据类型都不同的现象；

#### MyBatis:

resultMap配置是否需要通过association、collection进行多表映射管理；

是否需要Dto层作为CRUD基础，进行管理？通过现有实体对象进行管理，会额外增加一些与数据库表字段毫无关系的字段，

违背了实体类的初衷，实际项目中，使用Dto感觉还是要方便很多，做任何改动不会触及数据底层结构；

多表级联时，现有使用int自增需在insert标签中额外配置useGeneratedKeys="true" keyProperty="id"，才能获取主键，使用uuid则能直接避免这类复杂的配置；

Date等类型and creationTime != ''可忽略，有时会有因为其导致错误（<if test="creationTime != null and creationTime != ''">and creation_time = #{creationTime}</if>）；

#### 通用代码需要进行抽象：

将大家在项目中经常使用到的方法，进行抽象，通过指定类进行统一管理(如实体类与Dto之间的转换，可封装MapTo方法进行关联)；

#### 数据分离：

由于项目及后台管理系统都是内部使用，无需考虑SEO，因此日后项目CRUD的操作，统一通过API的形式来提供，以实现跨平台的目的（小程序、管理员后台开发一套API即可）；

日后对第三方提供接口或使用iview admin这类成熟的框架时，即可无缝衔接。如要做网站，基于API的核心代码，则可直接使用MVC调用（跨过API层）；

出于安全考虑，Java提供API时，是否可以通过请求的Host白名单进行拦截，若不是Host白名单中的域名或IP则无权访问，完全避免爬虫带来的风险；

#### 第三方类库引用标准化：

如处理json，规定为阿里巴巴的处理类(alibaba/fastjson)，现有项目中发现引用很多第三方类库，用法规则不同，使用起来没有同一标准;
在未使用前后端分离时，前端引用太多类库，维护难，效果差，组件不灵活；

#### 代码编写规范：

- 后台反馈的前台的状态码，本应为int类型，现无统一标准，String返回也是时有发生，导致前端判断时出错。该类型建议通过枚举统一管理；
  所有逻辑代码均在ServiceImpl中编写；
- ServiceImpl中只能引用自己的Mapper，其他表中的数据需通过其他表的ServiceImpl来调用；
- Controller仅作数据接收和调用ServiceImpl中的方法使用，不应有任何逻辑代码出现；
- domain对应的实体类，所有字段当以数据库中属性统一；
- 具有一定规则的类型使用枚举来增强可读性，尽管其存到数据库中为int类型（this.status = ApprovalStatus.pending.ordinal();//等价于this.status = 0;）;
- 所有数据请求使用JSON格式进行传参处理，数据文件上传例外；
- 建议禁止使用中文及中文首字母缩写命名项目及数据库表名、字段；
- 命名时尽可能使用比较准确的英文，如：用"Check"来描述审核状态是不合理的；
- 命名规范,主键自增更换为uuid(项目为何不用，原因在于若依框架自己再用Long类型)，MyBatis Plus集成了雪花算法；
- 实体类（domain）名需要与数据库表名一致，项目中发现有些实体类名与表名不一致；
- 逻辑相同，仅Type不同时，处理代码及页面通过参数去判断，前期不要图省事，勿用一个Type去写一套页面，增加日后维护难度；
- 相同的功能不要复制粘贴，必须抽成方法进行调用；

#### 微信小程序：

- 结合小程序自身的问题，美工参与进来的项目，使用第三方组件较多，不建议使用小程序自带的组件，小程序自带组件限制较多，无法对其样式进行定制化的修改。无需美工，可使用小程序自己的一套皮肤，做出来基本上和微信的效果是一样的；
- 不管使用哪种风格，都需要对常用组件进行封装，否则代码完全没有通用性，往往是封装的组件一行代码就解决的事情，自己写每次调用都要写相同的代码几十行，出现问题难以维护，缺点，编写组件比较耗时；
- 常用组件封装：日期、单选、多选、图片上传等；
- 请求统一处理；通过api.js处理所有请求，统一的入口可方便管理，比如权限；
- 表单验证：表单验证引用验证组件，通过配置来简化代码；
- 业务逻辑通过文件目录分级，提高结构的可读性，命名上可尽量与后台表名关联，严禁使用拼音及拼音缩写；

#### 实际开发现状：

- 赶工导致的通病,从不考虑代码通用性（无法复用）及数据结构（数据库表结构设计）,每个项目一种写法，单人维护，造成他人难以接手；
- 核心代码封装，源码不公开，无专人管理，最终导致各个项目引用的包不同，出现问题无法修改。
- 公司无自己的核心架构代码，一直使用若依框架，该框架过时，且bug较多，很多设计不完善，模板生成过于教条化，导致开发时代码冗余，维护时增加开发成本。
- 人员分配理念，前端人员与后端人员独立开发分工明确，前后端各执其责,仅仅是个口号而已；
- 项目不考虑SEO，现成的iview admin框架不用，thymeleaf大大降低了开发效率及耦合度，导致mvc+api接口的不伦布类的代码模式，小程序及app等无法共用一套后台代码；
- 新增、编辑页面逻辑代码一样，分开编码，导致实际过程中开发人员经常修改了编辑页面忘记修改新增页面，大大增加了维护难度和出错率；
- 权限有了新增、编辑居然还需要保存操作才能对新增、编辑进行操作，若依的神逻辑；

  # [项目底层代码建议](https://github.com/frlmoney/JobHunting/blob/main/%E9%A1%B9%E7%9B%AE%E5%BA%95%E5%B1%82%E4%BB%A3%E7%A0%81%E5%BB%BA%E8%AE%AE)
